<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_1622046_leave_ma.lms</api_name>
        <caller_access/>
        <client_callable>true</client_callable>
        <description/>
        <mobile_callable>false</mobile_callable>
        <name>lms</name>
        <sandbox_callable>false</sandbox_callable>
        <script><![CDATA[var lms = Class.create();
lms.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {

    getDateDiff: function () {

        var start = this.getParameter('sysparm_start');
        var end   = this.getParameter('sysparm_end');

        var d1 = new GlideDateTime();
        d1.setDisplayValue(start);

        var d2 = new GlideDateTime();
        d2.setDisplayValue(end);

        var duration = GlideDateTime.subtract(d2, d1);
        return duration.getNumericValue(); // milliseconds
    },
	getLeaveBucket: function(){
		var gr=new GlideRecord('x_1622046_leave_ma_leave_bucket');
		gr.addQuery('employee',this.getParameter('sysparm_user'));
		gr.addQuery('leave_type',this.getParameter('sysparm_leavetype'));
		gr.query();
		if(gr.next()){
			var leaveDetails={}
			leaveDetails.accured=''+gr.accured;
			leaveDetails.balance=''+gr.balance;
			leaveDetails.taken=''+gr.taken;
			return JSON.stringify(leaveDetails);
		}
	},

    type: 'lms'
});
]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-02-08 15:31:04</sys_created_on>
        <sys_id>9fbf72b793bab61016f9fd10ed03d6d1</sys_id>
        <sys_mod_count>6</sys_mod_count>
        <sys_name>lms</sys_name>
        <sys_package display_value="Leave Management System" source="x_1622046_leave_ma">d6409ee693fa321016f9fd10ed03d639</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Leave Management System">d6409ee693fa321016f9fd10ed03d639</sys_scope>
        <sys_update_name>sys_script_include_9fbf72b793bab61016f9fd10ed03d6d1</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-02-09 16:15:21</sys_updated_on>
    </sys_script_include>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>9fbf72b793bab61016f9fd10ed03d6d1</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-02-08 15:31:04</sys_created_on>
        <sys_id>d94043b793bab61016f9fd10ed03d6d5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-02-08 15:31:04</sys_updated_on>
        <table>sys_script_include</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
